"use strict";angular.module("datatorrent.mlhrTable.controllers.MlhrTableController",["datatorrent.mlhrTable.services.mlhrTableSortFunctions","datatorrent.mlhrTable.services.mlhrTableFilterFunctions","datatorrent.mlhrTable.services.mlhrTableFormatFunctions"]).controller("MlhrTableController",["$scope","$element","mlhrTableFormatFunctions","mlhrTableSortFunctions","mlhrTableFilterFunctions","$log","$window","$filter","$timeout",function(a,b,c,d,e,f,g,h,i){a.getSelectableRows=function(){var b=h("mlhrTableRowFilter");return angular.isArray(a.rows)?b(a.rows,a.columns,a.searchTerms,a.filterState,a.options):[]},a.isSelectedAll=function(){if(!angular.isArray(a.rows)||!angular.isArray(a.selected))return!1;var b=a.getSelectableRows();return b.length>0&&b.length===a.selected.length},a.selectAll=function(){a.deselectAll();var b=a.getSelectableRows();if(!(b.length<=0)){for(var c=a.columns,d=null,e=null,f=0;f<c.length;f++)if(c[f].selector){d=c[f].key,e=c[f].selectObject,a.options.__selectionColumn=c[f];break}if(!d)throw new Error("Unable to find selector column key for selectAll");for(var f=0;f<b.length;f++)a.selected.push(e?b[f]:b[f][d])}},a.deselectAll=function(){for(;a.selected.length>0;)a.selected.pop()},a.toggleSelectAll=function(b){var c=b.target;c.checked?a.selectAll():a.deselectAll()},a.addSort=function(b,c){var d=a.sortOrder.indexOf(b);-1===d&&a.sortOrder.push(b),a.sortDirection[b]=c},a.removeSort=function(b){var c=a.sortOrder.indexOf(b);-1!==c&&a.sortOrder.splice(c,1),delete a.sortDirection[b]},a.clearSort=function(){a.sortOrder=[],a.sortDirection={}},a.hasFilterFields=function(){for(var b=a.columns.length-1;b>=0;b--)if("undefined"!=typeof a.columns[b].filter)return!0;return!1},a.clearAndFocusSearch=function(c){a.searchTerms[c]="",b.find("tr.mlhr-table-filter-row th.column-"+c+" input").focus()},a.toggleSort=function(b,c){var d;if(c.sort){if(b.shiftKey)switch(a.sortDirection[c.id]){case"+":a.sortDirection[c.id]="-",d="-";break;case"-":a.removeSort(c.id),a.$emit("__column.sorted__",{id:c.id});break;default:a.addSort(c.id,"+"),d="+"}else{var e=a.sortDirection[c.id],f=!0;a.clearSort(),"+"===e?(a.addSort(c.id,"-"),d="-"):(a.addSort(c.id,"+"),d="+")}a.$emit("__column.sorted__",{id:c.id,direction:d,replace:f}),a.saveToStorage()}},a.getSortClass=function(b){var c=a.options.sortClasses;return"+"===b?c[1]:"-"===b?c[2]:c[0]},a.setColumns=function(b){a.columns=b,a.columns.forEach(function(a){var b=a.format;if("function"!=typeof b)if("string"==typeof b)if("function"==typeof c[b])a.format=c[b];else try{a.format=h(b)}catch(g){delete a.format,f.warn("format function reference in column(id="+a.id+') was not found in built-in format functions or $filters. format function given: "'+b+'". Available built-ins: '+Object.keys(c).join(",")+". If you supplied a $filter, ensure it is available on this module")}else delete a.format;var i=a.sort;"function"!=typeof i&&("string"==typeof i?"function"==typeof d[i]?a.sort=d[i](a.key):(delete a.sort,f.warn("sort function reference in column(id="+a.id+') was not found in built-in sort functions. sort function given: "'+i+'". Available built-ins: '+Object.keys(d).join(",")+". ")):delete a.sort);var j=a.filter;"function"!=typeof j&&("string"==typeof j?"function"==typeof e[j]?a.filter=e[j]:(delete a.filter,f.warn("filter function reference in column(id="+a.id+') was not found in built-in filter functions. filter function given: "'+j+'". Available built-ins: '+Object.keys(e).join(",")+". ")):delete a.filter)})},a.startColumnResize=function(b,c){function d(a){var b=a.pageX,c=b-f;e=j+c,h.css("width",e+"px")}b.preventDefault(),b.originalEvent.preventDefault(),b.stopPropagation();var e=!1,f=b.pageX,h=$('<div class="column-resizer-marquee"></div>'),i=$(b.target).parent("th");i.append(h);var j=i.outerWidth();h.css({width:j+"px",height:i.outerHeight()+"px"}),$(g).on("mousemove",d),$(g).one("mouseup",function(b){b.stopPropagation(),h.remove(),$(g).off("mousemove",d),e===!1?delete c.width:c.width=Math.max(e,0),a.$emit("__column.resized__",{id:c.id,width:c.width}),a.saveToStorage(),a.$apply()})},a.sortableOptions={axis:"x",handle:".column-text",helper:"clone",placeholder:"mlhr-table-column-placeholder",distance:5,stop:function(b,c){a.$emit("__column.moved__",a.columns.map(function(a){return a.id}))}},a.getActiveColCount=function(){var b=0;return a.columns.forEach(function(a){a.disabled||b++}),b},a.saveToStorage=function(){if(a.storage){var b={};["sortOrder","sortDirection","searchTerms"].forEach(function(c){b[c]=a[c]}),b.columns=a.columns.map(function(a){return{id:a.id,disabled:!!a.disabled,width:a.width}}),b.options={},["rowLimit","pagingScheme","storageHash"].forEach(function(c){b.options[c]=a.options[c]}),a.storage.setItem(a.storageKey,JSON.stringify(b))}},a.processStateString=function(b){var c;try{if(c=angular.isObject(b)?b:JSON.parse(b),c.options.storageHash!==a.options.storageHash)return;a.options.overrideSortOrder&&a.options.overrideSortDirection?(a.sortOrder=a.options.overrideSortOrder,a.sortDirection=a.options.overrideSortDirection):(a.sortOrder=c.sortOrder,a.sortDirection=c.sortDirection),a.options.overrideSearchTerms?a.searchTerms=a.options.overrideSearchTerms:a.searchTerms=c.searchTerms;var d=c.columns.map(function(a){return a.id});a.columns.sort(function(a,b){var c=-1===d.indexOf(a.id),e=-1===d.indexOf(b.id);return c&&e?0:c?1:e?-1:d.indexOf(a.id)-d.indexOf(b.id)}),a.columns.forEach(function(a,b){if(a.disabled=c.columns[b].disabled,(c.columns[b].width+"").indexOf("%"))a.width=c.columns[b].width;else{var d=parseFloat(c.columns[b].width);isNaN(d)||(a.width=d)}}),["rowLimit","pagingScheme","storageHash"].forEach(function(b){a.options[b]=c.options[b]})}catch(e){f.warn("Loading from storage failed!")}},a.loadFromStorage=function(){if(a.storage){var b=a.storage.getItem(a.storageKey);b&&a.processStateString(b)}},a.calculateRowLimit=function(){if(a.options.ignoreDummyRows)a.rowLimit=a.rows?a.rows.length:0;else{var b=a.options.fixedRowHeight||a.scrollDiv.find(".mlhr-table-rendered-rows tr").height();a.rowHeight=b||a.options.defaultRowHeight||20,a.rowLimit=Math.ceil(a.options.bodyHeight/a.rowHeight)+2*a.options.rowPadding}}}]),angular.module("datatorrent.mlhrTable.directives.mlhrTable",["datatorrent.mlhrTable.controllers.MlhrTableController","datatorrent.mlhrTable.directives.mlhrTableRows","datatorrent.mlhrTable.directives.mlhrTableHeaderLabel","datatorrent.mlhrTable.directives.mlhrTableDummyRows"]).directive("mlhrTable",["$log","$timeout","$q","$window",function(a,b,c,d){function e(a){if("object"!=typeof a)return a;for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];for(var e in d)void 0===a[e]&&(a[e]=d[e])}return a}function f(f,g){function h(a){if(f.columns){var b=f.columns.filter(function(a){return"selector"===a.id}).length;if(0!==b){var c=a&&a.id?a.id:void 0,d=g.width(),e=0;if(f.columns.forEach(function(a){e+=(a.width+"").indexOf("%")>-1?parseFloat(a.width)/100*d:parseFloat(a.width)}),d>e)for(var h=f.columns.length-1;h>0;h--)if(f.columns[h].id!==c&&!f.columns[h].lockWidth&&"selector"!==f.columns[h].id){delete f.columns[h].width;break}}}}f.$on("__column.resized__",function(a,b){h(b),f.$parent.$parent.$emit("column.resized",b)}),f.$on("__column.sorted__",function(a,b){f.$parent.$parent.$emit("column.sorted",b)}),f.$on("__column.moved__",function(a,b){f.$parent.$parent.$emit("column.moved",b)}),$(d).on("resize",h),f.$on("$destroy",function(){$(d).off("resize",h)});var i=500,j=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,f.options.scrollDebounce)};if(f.options=f.options||{},f.options.tableId=f.$id,f.options.setTableScope&&(f.options.tableScope=f),f.columns=angular.copy(f._columns),!(f.columns instanceof Array))throw new Error('"columns" array not found in mlhrTable scope!');if(f.setColumns(f.columns),void 0!==f.options&&{}.hasOwnProperty.call(f.options,"getter")&&"function"!=typeof f.options.getter)throw new Error('"getter" in "options" should be a function!');f.searchTerms={},f.sortOrder=[],f.sortDirection={},f.filterState={filterCount:f.rows?f.rows.length:0},f.rowOffset=0,f.rowLimit=10,f.options=f.options||{},e(f.options,{bgSizeMultiplier:1,rowPadding:10,headerHeight:77,bodyHeight:300,fixedHeight:!1,defaultRowHeight:40,scrollDebounce:100,scrollDivisor:1,loadingText:"loading",loadingError:!1,noRowsText:"no rows",trackBy:f.trackBy,sortClasses:["glyphicon glyphicon-sort","glyphicon glyphicon-chevron-up","glyphicon glyphicon-chevron-down"],onRegisterApi:function(a){}}),f.options.initialSorts&&angular.forEach(f.options.initialSorts,function(a){f.addSort(a.id,a.dir)}),f.options.storage&&f.options.storageKey?(f.storage=f.options.storage,f.storageKey=f.options.storageKey,f.loadFromStorage(),f.$watchCollection("columns",f.saveToStorage),f.$watchCollection("searchTerms",f.saveToStorage),f.$watch("options.pagingScheme",f.saveToStorage)):void 0!==f.options.userOverrides&&null!==f.options.userOverrides&&f.processStateString(f.options.userOverrides);var k,l=void 0,m=Date.now(),n=function(){var a=f.rowOffset;f.scrollHandler(),f.rowOffset===a&&f.dummyScope&&f.dummyScope.updateHeight(),f.options.ignoreTableHeightStyle||f.scrollDiv.css(f.options.fixedHeight?"height":"max-height",f.options.bodyHeight+"px"),f.saveToStorage()},o=function(){f.options.bodyHeight!==l&&Date.now()-m>i&&(m=Date.now(),l=f.options.bodyHeight,n()),k=j(o)};k=j(o),f.$watch("rowHeight",function(a){g.find("tr.mlhr-table-dummy-row").css("background-size","auto "+a*f.options.bgSizeMultiplier+"px")});var p,q,r=-1,s=function(a){r!==f.scrollDiv.scrollTop()&&(f.tableHeader=f.tableHeader||g.find(".mlhr-table.mlhr-header-table"),f.tableDummy=f.tableDummy||g.find(".mlhr-table.mlhr-dummy-table.table"),f.tableRows=f.tableRows||g.find(".mlhr-table.mlhr-rows-table.table"),r=f.scrollDiv.scrollTop(),p||(p=c.defer(),f.options.scrollingPromise=p.promise),f.scrollHandler()),q=j(s)};f.scrollHandler=function(){f.calculateRowLimit();var a=f.scrollDiv[0].scrollTop,b=f.rowHeight;return 0===b||void 0===f.tableRows?!1:(f.options.ignoreDummyRows?f.rowOffset=0:(f.rowOffset=Math.max(0,Math.min(f.filterState.filterCount-f.rowLimit,Math.floor(a/b)-f.options.rowPadding)),f.tableRows.css("top","-"+(f.tableDummy.height()-b*f.rowOffset)+"px")),p&&(p.resolve(),p=null),f.options.scrollingPromise=null,f.$root.$$phase||f.$digest(),void(f.userScrollSaved=f.userScroll))},f.scrollDiv=g.find(".mlhr-rows-table-wrapper"),q=j(s),b(function(){f.calculateRowLimit()},0),f.api={isSelectedAll:f.isSelectedAll,selectAll:f.selectAll,deselectAll:f.deselectAll,toggleSelectAll:f.toggleSelectAll,setLoading:function(a,b){f.options.loading=a,b&&f.$digest()}},f.options.onRegisterApi(f.api),angular.isObject(f.options.loadingPromise)&&"function"==typeof f.options.loadingPromise.then?f.options.loadingPromise.then(function(){f.options.loadingError=!1,f.api.setLoading(!1)},function(b){f.options.loadingError=!0,f.api.setLoading(!1),a.warn("Failed loading table data: "+b)}):f.api.setLoading(!1),f.$on("$destroy",function(){cancelAnimationFrame(k),cancelAnimationFrame(q)})}return{templateUrl:"src/templates/mlhrTable.tpl.html",restrict:"EA",replace:!0,scope:{_columns:"=columns",rows:"=",classes:"@tableClass",selected:"=",options:"=?",trackBy:"@?"},controller:"MlhrTableController",compile:function(a){var b=a.attr("track-by");return b&&a.find(".mlhr-table-rendered-rows").attr("track-by",b),f}}}]),angular.module("datatorrent.mlhrTable.directives.mlhrTableCell",["datatorrent.mlhrTable.directives.mlhrTableSelector"]).directive("mlhrTableCell",["$compile","$interpolate",function(a,b){function c(c,d){var e=c.column,f="";f=e.template?e.template:e.templateUrl?"<div ng-include=\"'"+e.templateUrl+"'\"></div>":e.selector===!0?'<input type="checkbox" ng-checked="selected.indexOf(column.selectObject ? row : row[column.key]) >= 0" mlhr-table-selector class="mlhr-table-selector" />':e.ngFilter?"{{ row[column.key] | "+e.ngFilter+"}}":e.format?void 0!==c.options&&{}.hasOwnProperty.call(c.options,"getter")?"{{ column.format(options.getter(column.key, row), row, column) }}":"{{ column.format(row[column.key], row, column) }}":void 0!==c.options&&{}.hasOwnProperty.call(c.options,"getter")?"{{ options.getter(column.key, row) }}":"{{ row[column.key] }}",d.html(f),a(d.contents())(c),c.getPopoverTitle=function(){return e.popoverTitle?c.$eval(b(e.popoverTitle)):""},c.getPopoverText=function(){return!e.disablePopover&&d[0].clientWidth<d[0].scrollWidth?d.html():""},c.getPopoverPlacement=function(a){var b="top";return.33>a?b="top-left":a>.67&&(b="top-right"),b}}return{scope:!0,link:c}}]),angular.module("datatorrent.mlhrTable.directives.mlhrTableDummyRows",[]).directive("mlhrTableDummyRows",function(){return{template:'<tr class="mlhr-table-dummy-row" ng-style="{ height: dummyRowHeight + \'px\'}"><td ng-show="dummyRowHeight" ng-attr-colspan="{{columns.length}}"></td></tr>',scope:!0,link:function(a,b,c){a.$parent.dummyScope=a,a.updateHeight=function(){if(!a.$parent.options.ignoreDummyRows&&a.$parent.tableRows&&a.$parent.filterState&&a.$parent.visible_rows){a.dummyRowHeight=(a.$parent.filterState.filterCount-a.$parent.visible_rows.length)*a.rowHeight;var b=a.$parent.tableRows.height()/a.$parent.visible_rows.length;a.$parent.tableRows.css("top","-"+(a.dummyRowHeight-b*a.$parent.rowOffset)+"px")}},a.$watch(c.mlhrTableDummyRowsFilteredCount,function(b,c){b!==c&&a.updateHeight()}),a.$watch(c.mlhrTableDummyRowsVisibleCount,function(b,c){b!==c&&a.updateHeight()})}}}),angular.module("datatorrent.mlhrTable.directives.mlhrTableHeaderLabel",[]).directive("mlhrTableHeaderLabel",function(){return{scope:!0,link:function(a,b){a.getPopoverText=function(a,c){var d="";return b[0].offsetWidth<b[0].scrollWidth?(d="<b>"+a+"</b>",c&&(d+="<br>"+c)):c&&(d=c),d},a.getPopoverPlacement=function(a){var b="top";return.33>a?b="top-left":a>.67&&(b="top-right"),b}}}}),angular.module("datatorrent.mlhrTable.directives.mlhrTableRows",["datatorrent.mlhrTable.directives.mlhrTableCell","datatorrent.mlhrTable.filters.mlhrTableRowFilter","datatorrent.mlhrTable.filters.mlhrTableRowSorter","ui.bootstrap"]).directive("mlhrTableRows",["$filter",function(a){function b(a){if(a.passThroughFilter)return a.rows;var b,c=JSON.stringify({searchTerms:a.searchTerms,sortOrder:a.sortOrder,sortDirection:a.sortDirection});return a.filterState.cache=a.filterState.cache||{},a.filterState.cache[c]||(a.filterState.cache[c]=a.filterState.cache[c]||d(a.rows,a.columns,a.searchTerms,a.filterState,a.options),a.filterState.cache[c]=e(a.filterState.cache[c],a.columns,a.sortOrder,a.sortDirection,a.options)),a.filterState.filterCount=a.filterState.cache[c].length,b=f(a.filterState.cache[c],Math.floor(a.rowOffset)-a.filterState.filterCount),b=f(b,a.rowLimit+Math.ceil(a.rowOffset%1))}function c(a){var c=function(){a.rows&&(a.visible_rows=b(a))},d=function(){if(a.selected&&a.selected.length>0&&a.options.__selectionColumn)if(a.options.__selectionColumn.selectObject)for(var b=0;b<a.selected.length;b++)-1===a.rows.indexOf(a.selected[b])&&(a.selected.splice(b,1),b--);else for(var c=a.rows.map(function(b){return b[a.options.__selectionColumn.key]}),b=0;b<a.selected.length;b++)-1===c.indexOf(a.selected[b])&&(a.selected.splice(b,1),b--)};a.highlightRowHandler=function(b){return a.options.highlightRow?a.options.highlightRow(b):!1},a.$watch("searchTerms",function(b,d){0!==a.scrollDiv.scrollTop()?a.scrollDiv.scrollTop(0):c(),angular.equals(b,d)||a.$parent.$parent.$emit("searchTerms.changed",a.searchTerms)},!0),a.$watch("[filterState.filterCount,rowOffset,rowLimit]",c),a.$watch("sortOrder",c,!0),a.$watch("sortDirection",c,!0),a.$watch("rows",function(b,e){a.filterState.cache={},d(),c(),angular.isArray(b)&&angular.isArray(e)&&b.length<e.length?a.scrollHandler():a.rows&&(a.rowLimit=a.rows.length)},!0)}var d=a("mlhrTableRowFilter"),e=a("mlhrTableRowSorter"),f=a("limitTo");return{restrict:"A",templateUrl:"src/templates/mlhrTableRows.tpl.html",compile:function(a,b){var d=a.find("tr"),e=d.attr("ng-repeat");return e+=b.trackBy?" track by row[options.trackBy]":" track by $index",d.attr("ng-repeat",e),c}}}]),angular.module("datatorrent.mlhrTable.directives.mlhrTableSelector",[]).directive("mlhrTableSelector",function(){return{restrict:"A",scope:!1,link:function(a,b){var c=a.selected,d=a.column;b.on("click",function(){var b=a.row;a.options.__selectionColumn=d;var e=c.indexOf(d.selectObject?b:b[d.key]);e>=0?c.splice(e,1):c.push(d.selectObject?b:b[d.key]),a.$apply()})}}}),angular.module("datatorrent.mlhrTable.filters.mlhrTableRowFilter",["datatorrent.mlhrTable.services.mlhrTableFilterFunctions"]).filter("mlhrTableRowFilter",["mlhrTableFilterFunctions","$log",function(a,b){return function(c,d,e,f,g){var h,i=c;return h=d.filter(function(c){var d=e[c.id];if(e.hasOwnProperty(c.id)&&"string"==typeof d){if(!d.trim())return!1;if("function"==typeof c.filter)return!0;var f=a[c.filter];if("function"==typeof f)return c.filter=f,!0;b.warn('mlhrTable: The filter function "'+c.filter+'" specified by column(id='+c.id+').filter was not found in predefined tableFilterFunctions. Available filters: "'+Object.keys(a).join('","')+'"')}return!1}),h.length&&(i=c.filter(function(a){for(var b=h.length-1;b>=0;b--){var c=h[b],d=c.filter,f=e[c.id],i=void 0!==g&&{}.hasOwnProperty.call(g,"getter")?g.getter(c.key,a):a[c.key],j="function"==typeof c.format?c.format(i,a):i;if(!d(f,i,j,a))return!1}return!0})),f.filterCount=i.length,i}}]),angular.module("datatorrent.mlhrTable.filters.mlhrTableRowSorter",[]).filter("mlhrTableRowSorter",function(){function a(a,c,d){var e=d+"_"+c;if(b.hasOwnProperty(c))return b[e];for(var f=a.length-1;f>=0;f--)if(a[f].id===c)return b[e]=a[f],a[f]}var b={};return function(b,c,d,e,f){if(!d.length)return b;for(var g=[],h=0;h<b.length;h++)g.push(b[h]);return g.sort(function(b,g){for(var h=0;h<d.length;h++){var i=d[h],j=a(c,i,f.tableId),k=e[i];if(j&&j.sort){var l=j.sort,m="+"===k?l(b,g,f):l(g,b,f);if(0!==m)return m}}return 0})}}),angular.module("datatorrent.mlhrTable",["datatorrent.mlhrTable.templates","ui.sortable","ngSanitize","datatorrent.mlhrTable.directives.mlhrTable"]),angular.module("datatorrent.mlhrTable.services.mlhrTableFilterFunctions",[]).service("mlhrTableFilterFunctions",function(){function a(a,b){a=a.toLowerCase().trim(),b=b.toLowerCase();var c=a[0];return"!"===c?(a=a.substr(1),""===a?!0:-1===b.indexOf(a)):"="===c?(a=a.substr(1),a===b.trim()):(a=a.replace("\\!","!"),a=a.replace("\\=","="),-1!==b.indexOf(a))}function b(b,c,d,e){return a(b,d,d,e)}function c(a,b){b=parseFloat(b),a=a.trim();var c=a.substr(0,2),d=a[0],e=1*a.substr(1),f=1*a.substr(2);return"<="===c?f>=b:">="===c?b>=f:"<"===d?e>b:">"===d?b>e:"~"===d?Math.round(b)===e:"="===d?e===b:b.toString().indexOf(a.toString())>-1}function d(a,b,d){return c(a,d)}function e(a){for(var b=a.trim().split(","),c=0,d=0;d<b.length;d++){var e=b[d].trim(),f=n.exec(e);if(f){var g=1*f[1],h=f[2].replace(/s$/,"");m.hasOwnProperty(h)&&(c+=g*m[h])}}return c}function f(a,b,c){if(a=a.trim(),!a)return!0;b*=1;var d,f,g=new Date,h=+g,i=a[0],j=a.substr(1).trim();if("<"===i)return d=h-e(j),c?{min:d}:b>d;if(">"===i)return f=h-e(j),c?{max:f}:f>b;if("today"===a)return c?(h=+new Date(g.toDateString()),{min:h,max:h+86399999}):new Date(b).toDateString()===g.toDateString();if("yesterday"===a)return c?(h=+new Date(g.toDateString()),{min:h-864e5,max:h}):new Date(b).toDateString()===new Date(h-m.d).toDateString();var k=new Date(a);return isNaN(k)?!1:c?{min:+k,max:+k}:new Date(b).toDateString()===k.toDateString()}function g(a){function b(a){var b={y:31536e6,ye:31536e6,yea:31536e6,year:31536e6,years:31536e6,mo:2592e6,mon:2592e6,mont:2592e6,month:2592e6,months:2592e6,w:6048e5,we:6048e5,wee:6048e5,week:6048e5,weeks:6048e5,d:864e5,da:864e5,day:864e5,days:864e5,h:36e5,ho:36e5,hou:36e5,hour:36e5,hours:36e5,mi:6e4,min:6e4,minu:6e4,minut:6e4,minute:6e4,minutes:6e4,"":1e3,s:1e3,se:1e3,sec:1e3,seco:1e3,secon:1e3,second:1e3,seconds:1e3},c=a.match(/^( *)(\d+\.?\d*|\d*\.?\d+)( *)(y|ye|yea|year|years|mo|mon|mont|month|months|w|we|wee|week|weeks|d|da|day|days|h|ho|hou|hour|hours|mi|min|minu|minut|minute|minutes|s|se|sec|seco|secon|second|seconds| *)( *$)/i);return c?c[2]*b[c[4]]:(c=a.match(/(^ *)(\d\d|\d)(:\d\d)(:\d\d)?( *$)/),c&&c[4]?c[2]*b.hours+c[3].substr(1)*b.minutes+c[4].substr(1)*b.seconds:c?c[2]*b.hours+c[3].substr(1)*b.minutes:NaN)}var c=0;if(a)for(var d=a.split(","),e=0;e<d.length;e++)c+=b(d[e]);return c}function h(a,b){if("number"!=typeof b||isNaN(b))return!1;for(var c,d,e,f,h=!0,i=a.split("&"),j=0;j<i.length&&h;j++)if(c=i[j].match(/^( *)(<=|>=|>|<|=| *)( *)(.*)/)){if(d=c[2]||"=",e=c[4],!e||isNaN(f=g(e)))return!1;"<="===d?h=f>=b:">="===d?h=b>=f:">"===d?h=b>f:"<"===d?h=f>b:"="===d&&(h=b===f)}return h}function i(a,b,c){return h(a,g(c))}function j(a,b){function c(a){var c={bb:1.2379400392853803e27,yb:1.2089258196146292e24,zb:0x400000000000000000,eb:0x1000000000000000,pb:0x4000000000000,tb:1099511627776,gb:1073741824,"":1048576,mb:1048576,kb:1024,b:1},d=a.match(/^( *)(\d+\.?\d*|\d*\.?\d+)( *)(b|kb|mb|gb|tb|pb|eb|zb|yb|bb| *)( *$)/i);return d?d[2]*c[d[4].toLowerCase()]/c[(b||"b").toLowerCase()]:NaN}var d=0;if(a)for(var e=a.split(","),f=0;f<e.length;f++)d+=c(e[f]);return d}function k(a,b){if("number"!=typeof b||isNaN(b))return!1;for(var c,d,e,f,g=!0,h=a.split("&"),i=0;i<h.length&&g;i++)if(c=h[i].match(/^( *)(<=|>=|>|<|=| *)( *)(.*)/)){if(d=c[2]||"=",e=c[4],!e||isNaN(f=j(e)))return!1;"<="===d?g=f>=b:">="===d?g=b>=f:">"===d?g=b>f:"<"===d?g=f>b:"="===d&&(g=b===f)}return g}function l(a,b,c){return k(a,j(c))}a.placeholder=b.placeholder="string search",a.title=b.title='Search by text, eg. "foo". Use "!" to exclude and "=" to match exact text, e.g. "!bar" or "=baz".',c.placeholder=d.placeholder="number search",c.title=d.title='Search by number, e.g. "123". Optionally use comparator expressions like ">=10" or "<1000". Use "~" for approx. int values, eg. "~3" will match "3.2"';var m={};m.second=m.sec=m.s=1e3,m.minute=m.min=m.m=60*m.second,m.hour=m.hr=m.h=60*m.minute,m.day=m.d=24*m.hour,m.week=m.wk=m.w=7*m.day,m.month=4*m.week,m.year=m.yr=m.y=365*m.day;var n=/(\d+(?:\.\d+)?)\s*([a-z]+)/;return f.placeholder="date search",f.title='Search by date. Enter a date string (RFC2822 or ISO 8601 date). You can also type "today", "yesterday", "> 2 days ago", "< 1 day 2 hours ago", etc.',h.placeholder=i.placeholder="duration search",h.title=i.title='Search by duration, e.g.:\n"<= 30 minutes",\n"= 1 hour",\n">= 1 day, 4 hours" or\n "> 2.5 days & < 3 days".\nDefault operator is "=" and unit is "second".\nThus searching "60", "60 seconds", or "= 60" are equivalent to "= 60 seconds".',k.placeholder=l.placeholder="memory search",k.title=l.title='Search by memory using expressions, e.g.\n"> 512mb", "= 1.5GB", or\n">= 128GB & <= 256GB".\nUnits are not case sensitive.\nDefault operator is "=" and unit is "MB".\nThus searching "128", "= 128" or "128 MB" are equivalent to "= 128 MB".',{like:a,likeFormatted:b,number:c,numberFormatted:d,date:f,duration:h,durationFormatted:i,stringToDuration:g,memory:k,memoryFormatted:l,stringToMemory:j}}),angular.module("datatorrent.mlhrTable.services.mlhrTableFormatFunctions",[]).service("mlhrTableFormatFunctions",function(){return{}}),angular.module("datatorrent.mlhrTable.services.mlhrTableSortFunctions",[]).service("mlhrTableSortFunctions",["mlhrTableFilterFunctions",function(a){return{number:function(a){return function(b,c,d){var e,f;return void 0!==d&&{}.hasOwnProperty.call(d,"getter")?(e=d.getter(a,b),f=d.getter(a,c)):(e=b[a],f=c[a]),1*e-1*f}},string:function(a){return function(b,c,d){var e,f;return void 0!==d&&{}.hasOwnProperty.call(d,"getter")?(e=d.getter(a,b),f=d.getter(a,c)):(e=b[a],f=c[a]),e.toString().toLowerCase()===f.toString().toLowerCase()?0:e.toString().toLowerCase()>f.toString().toLowerCase()?1:-1}},durationFormatted:function(b){return function(c,d,e){var f=a.stringToDuration(c[b]),g=a.stringToDuration(d[b]);return f>g?1:-1}},memoryFormatted:function(b){return function(c,d,e){var f=a.stringToMemory(c[b]),g=a.stringToMemory(d[b]);return f>g?1:-1}}}}]),angular.module("datatorrent.mlhrTable.templates",["src/templates/mlhrTable.tpl.html","src/templates/mlhrTableDummyRows.tpl.html","src/templates/mlhrTableRows.tpl.html"]),angular.module("src/templates/mlhrTable.tpl.html",[]).run(["$templateCache",function(a){a.put("src/templates/mlhrTable.tpl.html",'<div class="mlhr-table-wrapper">\n  <div class="mlhr-rows-table-wrapper">\n    <table ng-class="classes" class="mlhr-table mlhr-header-table">\n      <thead>\n        <tr ui-sortable="sortableOptions" ng-model="columns">\n          <th \n            scope="col" \n            ng-repeat="column in columns" \n            ng-click="toggleSort($event,column)" \n            ng-class="{\'sortable-column\' : column.sort, \'select-column\': column.selector}"\n            ng-style="{ width: column.width, \'min-width\': column.width, \'max-width\': column.width }"\n          >\n            <span \n              class="mlhr-table-header-label" \n              ng-class="{ \'column-selector\': column.selector, \'column-text\': !column.selector }"\n              mlhr-table-header-label\n              uib-popover-html="getPopoverText((column.hasOwnProperty(\'label\') ? column.label : column.id), column.title)"\n              popover-trigger="{{ \'mouseenter\' }}"\n              popover-placement=\'{{getPopoverPlacement($index/(columns.length-1))}}\'\n              popover-append-to-body="true">\n              <input ng-if="column.selector" type="checkbox" ng-checked="isSelectedAll()" ng-click="toggleSelectAll($event)" />\n              {{column.hasOwnProperty(\'label\') ? column.label : column.id }}\n              <span \n                ng-if="column.sort" \n                title="This column is sortable. Click to toggle sort order. Hold shift while clicking multiple columns to stack sorting."\n                class="sorting-icon {{ getSortClass( sortDirection[column.id] ) }}"\n              ></span>\n            </span>\n            <span \n              ng-if="!column.lockWidth"\n              ng-class="{\'discreet-width\': !!column.width, \'column-resizer\': true}"\n              title="Click and drag to set discreet width. Click once to clear discreet width."\n              ng-mousedown="startColumnResize($event, column)"\n            >\n              &nbsp;\n            </span>\n          </th>\n        </tr>\n        <tr ng-if="hasFilterFields()" class="mlhr-table-filter-row">\n          <td ng-repeat="column in columns" ng-class="\'column-\' + column.id">\n            <input \n              type="text"\n              ng-if="(column.filter)"\n              ng-model="searchTerms[column.id]"\n              ng-attr-placeholder="{{ column.filter && column.filter.placeholder }}"\n              ng-attr-title="{{ column.filter && column.filter.title }}"\n              ng-class="{\'active\': searchTerms[column.id] }"\n            >\n            <button \n              ng-if="(column.filter)"\n              ng-show="searchTerms[column.id]"\n              class="clear-search-btn"\n              role="button"\n              type="button"\n              ng-click="clearAndFocusSearch(column.id)"\n            >\n              &times;\n            </button>\n\n          </td>\n        </tr>\n      </thead>\n    </table>\n    <table ng-class="classes" class="mlhr-table mlhr-dummy-table mlhr-rows-scroller">\n      <tbody mlhr-table-dummy-rows\n        mlhr-table-dummy-rows-filtered-count="filterState.filterCount"\n        mlhr-table-dummy-rows-visible-count="visible_rows.length"\n        columns="columns"\n        cell-content="..."></tbody>\n    </table>\n    <table ng-class="classes" class="mlhr-table mlhr-rows-table">\n      <thead>\n        <th \n            scope="col"\n            ng-repeat="column in columns" \n            ng-style="{ width: column.width, \'min-width\': column.width, \'max-width\': column.width }"\n          ></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-if="visible_rows.length === 0">\n          <td ng-attr-colspan="{{columns.length}}" class="space-holder-row-cell">\n            <div ng-if="options.loadingError">\n              <div ng-if="!options.loading && options.loadingErrorTemplateUrl" ng-include="options.loadingErrorTemplateUrl"></div>\n              <div ng-if="!options.loading && !options.loadingErrorTemplateUrl">{{ options.loadingErrorText }}</div>\n            </div>\n            <div ng-if="!options.loadingError">\n              <div ng-if="options.loading && options.loadingTemplateUrl" ng-include="options.loadingTemplateUrl"></div>\n              <div ng-if="options.loading && !options.loadingTemplateUrl">{{ options.loadingText }}</div>\n              <div ng-if="!options.loading && options.noRowsTemplateUrl" ng-include="options.noRowsTemplateUrl"></div>\n              <div ng-if="!options.loading && !options.noRowsTemplateUrl">{{ options.noRowsText }}</div>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n      <tbody mlhr-table-rows class="mlhr-table-rendered-rows"></tbody>\n    </table>\n  </div>\n</div>\n')}]),angular.module("src/templates/mlhrTableDummyRows.tpl.html",[]).run(["$templateCache",function(a){a.put("src/templates/mlhrTableDummyRows.tpl.html","")}]),angular.module("src/templates/mlhrTableRows.tpl.html",[]).run(["$templateCache",function(a){a.put("src/templates/mlhrTableRows.tpl.html",'<tr ng-repeat="row in visible_rows" \n  ng-class="{highlight: highlightRowHandler(row)}"\n  ng-attr-class="{{ (rowOffset + $index) % 2 ? \'odd\' : \'even\' }}">\n\n  <td ng-repeat="column in columns track by column.id"\n    class="mlhr-table-cell {{ column.cssClass }}"\n    ng-class="{ \'column-selector\': column.selector }"\n    mlhr-table-cell\n    uib-popover-html="getPopoverText()"\n    popover-class="{{ column.popoverClass || \'mlhr-table-cell-popover-text \' + column.popoverClass }}"\n    popover-title="{{ getPopoverTitle() }}"\n    popover-trigger="{{ column.popoverTrigger || \'mouseenter\' }}"\n    popover-popup-delay="{{ column.popoverPopupDelay || 1000 }}"\n    popover-placement=\'{{column.popoverPlacement || getPopoverPlacement($index/(columns.length-1))}}\'\n    popover-append-to-body="true">\n  </td>\n\n</tr>\n')}]);